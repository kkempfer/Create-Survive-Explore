let AbstractClientPlayer = Java.loadClass('net.minecraft.client.player.AbstractClientPlayer');
let AnimationHolder = Java.loadClass('elocindev.animation_overhaul.api.AnimationHolder');
let AnimationOverhaul = Java.loadClass('elocindev.animation_overhaul.AnimationOverhaul');
let ResourceLocation = Java.loadClass('net.minecraft.resources.ResourceLocation');

function playAnimationOverhaul(player, animationName) {
    let resourceLocation = new ResourceLocation(AnimationOverhaul.MODID, animationName);
    let animationHolder = new AnimationHolder(resourceLocation, true);
    let animation = animationHolder.getAnimation()

    // This is wrong
    player.playAnimation(animation, 1.0, 1);

};

PlayerEvents.tick(event => {
    const player = event.player;
    const itemInHand = player.getMainHandItem();

    if (itemInHand.id === 'farmersdelight:golden_knife' && player.swinging && player.swingTime === 0) {
        playAnimationOverhaul(player, 'sword_swing_first');
    }

});
